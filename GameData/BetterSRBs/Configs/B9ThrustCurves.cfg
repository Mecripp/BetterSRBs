@PART:HAS[#BetterSRBsTag[True],@MODULE[ModuleEngines]:HAS[@PROPELLANT[SolidFuel]]]:NEEDS[B9PartSwitch]:LAST[BetterSRBs]
{
	@description ^= :$: <br><color="green">This part can accept different fuel shapes and render different performance envelopes.</color>
	@MODULE[ModuleEngines]:HAS[@PROPELLANT[SolidFuel]]
	{
		%useThrustCurve = True
		!thrustCurve {}
		thrustCurve
		{
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = solidThrustCurve
		switcherDescription = Grain Geometry
		switcherDescriptionPlural = Grain Geometries
		SUBTYPE
		{
			name = 6pStar
			title = 6-pointed Star
			primaryColor = Amber
			secondaryColor = Blue
			defaultSubtypePriority = 2
			descriptionSummary = Average thrust 80% of default, with 25% longer burn time.
			descriptionDetail = Thrust starts at 76% of average, climbs steadily to 113% at 0.57 fuel fraction remaining, then continues nearly flat before rapidly decaying at end.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEngines
					useThrustCurve = True
				}
				DATA
				{
					maxThrust = #$/MODULE[ModuleEngines]/maxThrust01$
					thrustCurve
					{
						key = 0 0.1 0 50
						key = 0.03 1.1131 0.035 0.035
						key = 0.57 1.132 0.035 -0.865
						key = 1 0.76005 -0.865 0
					}
				}
			}
		}
		SUBTYPE
		{
			name = 8pStar
			title = 8-pointed Star
			primaryColor = Amber
			secondaryColor = Green
			defaultSubtypePriority = 3
			descriptionSummary = Default fuel grain, with standard thrust and burn time.
			descriptionDetail = Thrust starts at 100% of average, climbs steadily to 125% at 0.61 fuel fraction remaining, then steadily declines to 79% before rapidly decaying.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEngines
					useThrustCurve = True
				}
				DATA
				{
					thrustCurve
					{
						key = 0 0.1 0 35
						key = 0.03 0.7895 0.8 0.8
						key = 0.61 1.2535 0.8 -0.65
						key = 1 1 -0.65 0
					}
				}
			}
		}
		SUBTYPE
		{
			name = 10pStar
			title = 10-pointed Star
			primaryColor = Amber
			secondaryColor = Red
			defaultSubtypePriority = 1
			descriptionSummary = Average thrust 120% of default, with 17% less burn time.
			descriptionDetail = Thrust starts high at 127% of average, quickly climbs to 141% at 0.64 fuel fraction remaining, then steadily declines to 61% before rapidly decaying.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEngines
					useThrustCurve = True
				}
				DATA
				{
					maxThrust = #$/MODULE[ModuleEngines]/maxThrust02$
					thrustCurve
					{
						key = 0 0.1 0 25
						key = 0.03 0.6089 1.31 1.31
						key = 0.64 1.408 1.31 -0.385
						key = 1 1.2694 -0.385 0
					}
				}
			}
		}
	}
}

@PART:HAS[#BetterSRBsTag[True],@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[SolidFuel]]]:NEEDS[B9PartSwitch]:LAST[BetterSRBs]
{
	@description ^= :$: <br><color="green">This part can accept different fuel shapes and render different performance envelopes.</color>
	@MODULE[ModuleEnginesFX]:HAS[@PROPELLANT[SolidFuel]]
	{
		%useThrustCurve = True
		!thrustCurve {}
		thrustCurve
		{
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = solidThrustCurve
		switcherDescription = Grain Geometry
		switcherDescriptionPlural = Grain Geometries
		SUBTYPE
		{
			name = 6pStar
			title = 6-pointed Star
			primaryColor = Amber
			secondaryColor = Blue
			defaultSubtypePriority = 2
			descriptionSummary = Average thrust 80% of default, with 25% longer burn time.
			descriptionDetail = Thrust starts at 76% of average, climbs steadily to 113% at 0.57 fuel fraction remaining, then continues nearly flat before rapidly decaying at end.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					useThrustCurve = True
				}
				DATA
				{
					maxThrust = #$/MODULE[ModuleEnginesFX]/maxThrust01$
					thrustCurve
					{
						key = 0 0.1 0 50
						key = 0.03 1.1131 0.035 0.035
						key = 0.57 1.132 0.035 -0.865
						key = 1 0.76005 -0.865 0
					}
				}
			}
		}
		SUBTYPE
		{
			name = 8pStar
			title = 8-pointed Star
			primaryColor = Amber
			secondaryColor = Green
			defaultSubtypePriority = 3
			descriptionSummary = Default fuel grain, with standard thrust and burn time.
			descriptionDetail = Thrust starts at 100% of average, climbs steadily to 125% at 0.61 fuel fraction remaining, then steadily declines to 79% before rapidly decaying.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					useThrustCurve = True
				}
				DATA
				{
					thrustCurve
					{
						key = 0 0.1 0 35
						key = 0.03 0.7895 0.8 0.8
						key = 0.61 1.2535 0.8 -0.65
						key = 1 1 -0.65 0
					}
				}
			}
		}
		SUBTYPE
		{
			name = 10pStar
			title = 10-pointed Star
			primaryColor = Amber
			secondaryColor = Red
			defaultSubtypePriority = 1
			descriptionSummary = Average thrust 120% of default, with 17% shorter burn time.
			descriptionDetail = Thrust starts high at 127% of average, quickly climbs to 141% at 0.64 fuel fraction remaining, then steadily declines to 61% before rapidly decaying.
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleEnginesFX
					useThrustCurve = True
				}
				DATA
				{
					maxThrust = #$/MODULE[ModuleEnginesFX]/maxThrust02$
					thrustCurve
					{
						key = 0 0.1 0 25
						key = 0.03 0.6089 1.31 1.31
						key = 0.64 1.408 1.31 -0.385
						key = 1 1.2694 -0.385 0
					}
				}
			}
		}
	}
}